id: ref_genomes
description: "Reference genomes manager: download FASTA/annotation, build indices with local tools, and create ERCC-augmented indices. Optimized for ad-hoc usage (--out)."

params: {}

render:
  # In project mode, this renders under the project root. In ad-hoc mode (--out),
  # BPM overrides 'into' to '.' so files land directly under the provided folder.
  into: "/data/ref_genomes/"
  files:
    # Render run script and starter config
    - run.sh               -> run.sh
    - build_ref_genomes.py -> build_ref_genomes.py
    - genomes.yaml         -> genomes.yaml
    - pixi.toml            -> pixi.toml
    - README.md            -> README.md
    # Bundle ERCC92 reference locally to avoid network dependencies
    - ERCC92/ERCC92.fa  -> ERCC92/ERCC92.fa
    - ERCC92/ERCC92.gtf -> ERCC92/ERCC92.gtf

run:
  entry: "run.sh"

tools:
  required: [python3]
  optional: [pixi]

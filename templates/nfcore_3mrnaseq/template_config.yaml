id: nfcore_3mrnaseq
description: nf-core/rnaseq wrapper; requires only genome. Samplesheet generated by pre_run hook (reverse-stranded). This template is for 3'mRNA-seq data, not total RNA-seq and mRNA-seq data.
params:
  genome:
    type: str
    required: true
    cli: "--genome"
    description: "iGenomes identifier (e.g. GRCh38, GRCm39)"
  agendo_id:
    type: int
    required: true
    cli: "--agendo-id"
    description: "Agendo request id to fetch metadata"
  umi:
    type: bool
    required: false
    cli: "--umi"
    description: "Whether the data contains UMI barcodes"
    default: false
  ercc:
    type: bool
    required: false
    cli: "--ercc"
    description: "Whether the data contains ERCC spike-ins"
    default: false
  max_cpus:
    type: int
    required: false
    cli: "--max-cpus"
    description: "Maximum CPUs for nf-core/rnaseq (default: 80% of host)"
  max_memory:
    type: str
    required: false
    cli: "--max-memory"
    description: "Maximum memory for nf-core/rnaseq, (default: 80% of host)"
render:
  into: "${ctx.project_dir}/${ctx.template.id}/"
  files:
    - run.sh.j2 -> run.sh
    - nextflow.config -> nextflow.config
run:
  entry: run.sh
hooks:
  pre_render:
    - hooks.agendo:fetch
    - hooks.genome_from_organism:set_from_organism
    - hooks.nfcore_rnaseq_resources_80pct:set_max_resources_80pct
  post_render:
    - hooks.nfcore_rnaseq_samplesheet_forward:main

publish:
  salmon_dir:
    resolver: "resolvers.get_salmon_dir"
  nfcore_multiqc:
    resolver: "resolvers.get_multiqc_report"
  nfcore_samplesheet:
    resolver: "resolvers.get_samplesheet"

tools:
  required: []
  optional: []

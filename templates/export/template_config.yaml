id: export
description: "Generate and submit export job specs from a rule-based mapping table."

params:
  export_engine_api_url:
    type: str
    required: false
    default: "http://genomics.rwth-aachen.de:9500"
    description: "Base URL for the export engine API (no trailing /export)"
  export_engine_backends:
    type: str
    required: false
    default: "apache, owncloud, sftp"
    description: "Comma-separated list of export backends"
  export_expiry_days:
    type: int
    required: false
    default: 30
    description: "Optional expiry_days for export engine job spec"

tools:
  required: [python]

render:
  into: "${ctx.project_dir}/${ctx.template.id}/"
  files:
    - run.py -> run.py

run:
  entry: "run.py"

hooks:
  post_render:
    - hooks.export_build_spec:main
